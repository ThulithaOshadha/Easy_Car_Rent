<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Admin_Page</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../src/main/java/lk/easycar/assets/styles/stylesheet.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">

</head>
<body>
<!--Header-->
<header>
    <ul class="nav justify-content-end shadow p-1 mb-3 bg-e74c3c">
        <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="#">Home</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="#">About</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="#">Cars</a>
        </li>
        <li>
            <nav class="navbar bg-body-tertiary">
                <form class="container-fluid justify-content-start">
                    <button id="loginButtonInHome" class="btn btn-sm btn-outline-secondary" type="button"><a
                            href="login.html">Log In</a></button>
                </form>
            </nav>
        </li>
    </ul>


</header>
<!--Dashboard-->

<section id="registeredCustomer" class="col-8 " style="margin-left: 260px;background: #DDDDDD">

    <div class="container text-center">
        <div class="row m-2">
            <div class="col">
                <div class="row">
                    <div class="col-3">
                        <img src="assests/adminPage/cusPng.png" class="img-fluid" alt="mainPage">
                    </div>
                    <div id="bookingUsers" class="col -5">
                        <h4>Registered Users : </h4>
                        <div id="spinnerUser">
                            <div class="spinner-border" role="status">
                                <span class="visually-hidden">Loading...</span>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
            <div class="col">
                <div class="row">
                    <div class="col-3">
                        <img src="assests/adminPage/cusPng.png" class="img-fluid" alt="mainPage">
                    </div>
                    <div id="carsCount" class="col -5">
                        <h4>Available Cars : </h4>
                        <div id="spinnerBooking">
                            <div class="spinner-border" role="status">
                                <span class="visually-hidden">Loading...</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row m-2">
            <div class="col">
                <div class="row">
                    <div class="col-3">
                        <img src="assests/adminPage/cusPng.png" class="img-fluid" alt="mainPage">
                    </div>
                    <div id="driverCount" class="col -5">
                        <h4>Available Driver : </h4>
                        <div id="spinnerUser">
                            <div class="spinner-border" role="status">
                                <span class="visually-hidden">Loading...</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="row">
                    <div class="col-3">
                        <img src="assests/adminPage/cusPng.png" class="img-fluid" alt="mainPage">
                    </div>
                    <div id="repairCars" class="col -5">
                        <h4>Car that need maintenance : </h4>
                        <div id="spinnerUser">
                            <div class="spinner-border" role="status">
                                <span class="visually-hidden">Loading...</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row m-2">
            <div class="col">
                <div class="row">
                    <div class="col-3">
                        <img src="assests/adminPage/cusPng.png" class="img-fluid" alt="mainPage">
                    </div>
                    <div id="bookingCount" class="col -5">
                        <h4>Booking Active : </h4>
                        <div id="spinnerUser">
                            <div class="spinner-border" role="status">
                                <span class="visually-hidden">Loading...</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="row">
                    <div class="col-3">
                        <img src="assests/adminPage/cusPng.png" class="img-fluid" alt="mainPage">
                    </div>
                    <div id="bookingForDay" class="col -5">
                        <h4>Booking for day : </h4>
                        <div id="spinnerUser">
                            <div class="spinner-border" role="status">
                                <span class="visually-hidden">Loading...</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!--<div id="bookingUsers" class="row">
      <div class="col-4">
        <img src="assests/adminPage/cusPng.png" class="img-fluid" alt="mainPage">
      </div>
      <div class="col -7">
        <h2>Registered Users : </h2>
        <div id="spinnerUser">
          <div class="spinner-border" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
        </div>
      </div>

    </div>
    <div id="bookingUsers" class="row">
      <div class="col-4">
        <img src="assests/adminPage/cusPng.png" class="img-fluid" alt="mainPage">
      </div>
      <div class="col -7">
        <h2>Registered Users : </h2>
        <div id="spinnerUser">
          <div class="spinner-border" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
        </div>
      </div>

    </div>
    <div id="bookingUsers" class="row">
      <div class="col-4">
        <img src="assests/adminPage/cusPng.png" class="img-fluid" alt="mainPage">
      </div>
      <div class="col -7">
        <h2>Registered Users : </h2>
        <div id="spinnerUser">
          <div class="spinner-border" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
        </div>
      </div>

    </div>
    <div id="bookingUsers" class="row">
      <div class="col-4">
        <img src="assests/adminPage/cusPng.png" class="img-fluid" alt="mainPage">
      </div>
      <div class="col -7">
        <h2>Registered Users : </h2>
        <div id="spinnerUser">
          <div class="spinner-border" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
        </div>
      </div>

    </div>
    <div id="bookingUsers" class="row">
      <div class="col-4">
        <img src="assests/adminPage/cusPng.png" class="img-fluid" alt="mainPage">
      </div>
      <div class="col -7">
        <h2>Registered Users : </h2>
        <div id="spinnerUser">
          <div class="spinner-border" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
        </div>
      </div>

    </div>
    <div id="bookingUsers" class="row">
      <div class="col-4">
        <img src="assests/adminPage/cusPng.png" class="img-fluid" alt="mainPage">
      </div>
      <div class="col -7">
        <h2>Registered Users : </h2>
        <div id="spinnerUser">
          <div class="spinner-border" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
        </div>
      </div>

    </div>-->


    <!-- <div id="bookingCount">
       <h2>Bookings for the day : </h2>
       <h2>15</h2>
     </div>

     <div id="carsCount">
       <h2>Available and reserved cars : </h2>
       <div>
         <div class="spinner-border" role="status">
           <span class="visually-hidden">Loading...</span>
         </div>
       </div>
     </div>

     <div>
       <h2>Bookings active for the day : </h2>
       <h2>2</h2>
     </div>

     <div id="driverCount">
       <h2>Available and occupied drivers : </h2>
       <div>
         <div class="spinner-border" role="status">
           <span class="visually-hidden">Loading...</span>
         </div>
       </div>
     </div>
     <div>
       <h2>Cars that need maintenance : </h2>
       <h2>5</h2>
     </div>-->
</section>
<section class="col-5" style="margin-left: 400px;margin-top: 95px">
    <div id="carouselExample" class="carousel slide  justify-center">
        <!--<div class="carousel-indicators">
            <button type="button" data-bs-target="#carouselExample" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1" style="background: black"></button>
            <button type="button" data-bs-target="#carouselExample" data-bs-slide-to="1" aria-label="Slide 2"></button>
        </div>-->
        <div class="carousel-inner">
            <div id="carouselOne" class="carousel-item active">
                <div class="row">
                    <div class="col">
                        <img src="assests/adminPage/cusPng.png" class="d-block w-100" alt="...">
                        <h5 class="m-2">Manage Customer</h5>
                    </div>
                    <div class="col">
                        <img src="assests/adminPage/cusPng.png" class="d-block w-100" alt="...">
                        <h5 class="m-2">Manage Booking</h5>

                    </div>
                    <div class="col">
                        <img src="assests/adminPage/cusPng.png" class="d-block w-100" alt="...">
                        <h5 class="m-2">Manage Driver</h5>
                    </div>

                </div>
            </div>
            <div id="carouselTwo" class="carousel-item">
                <div class="row">
                    <div class="col">
                        <img src="assests/adminPage/cusPng.png" class="d-block w-100" alt="...">
                        <h5 class="m-2">Manage Car</h5>
                    </div>
                    <div class="col">
                        <img src="assests/adminPage/cusPng.png" class="d-block w-100" alt="...">
                        <h5 class="m-2">Manage Customer</h5>
                    </div>
                    <div class="col">
                        <img src="assests/adminPage/cusPng.png" class="d-block w-100" alt="...">
                        <h5 class="m-2">Manage Customer</h5>
                    </div>

                </div>
            </div>

        </div>
        <button id="btnPrevious" class="carousel-control-prev" type="button" data-bs-target="#carouselExample"
                data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
        </button>
    </div>
</section>


<!--
<section class="row position-absolute top-50 start-0 translate-middle"
         style="right: 38%;transform: translate(34%,20%)!important;" id="adminTaskContext">
    <div class="col-5">
        <div class="card mb-3" style="max-width: 540px;">
            <div class="row g-0">
                <div class="col-md-4">
                    <img src="../src/main/java/lk/easycar/assets/customer_management.jpg"
                         class="img-fluid rounded-start" alt="...">
                </div>
                <div class="col-md-8">
                    <div class="card-body">
                        <h5 class="card-title">Manage Customers</h5>
                        <li>Add Customers</li>
                        <li>Update Customers</li>
                        <li>Remove Customers</li>
                        <li>Approve</li>
                    </div>
                </div>
            </div>
        </div>
        <div class="card mb-3" style="max-width: 540px;">
            <div class="row g-0">
                <div class="col-md-4">
                    <img src="../src/main/java/lk/easycar/assets/driver_management.jpg" class="img-fluid rounded-start"
                         alt="...">
                </div>
                <div class="col-md-8">
                    <div class="card-body">
                        <h5 class="card-title">Manage Cars</h5>
                        <li>Add Cars</li>
                        <li>Update Cars</li>
                        <li>Remove Cars</li>
                        <li>Maintenance</li>
                    </div>
                </div>
            </div>
        </div>
        <div class="card mb-3" style="max-width: 540px;">
            <div class="row g-0">
                <div class="col-md-4">
                    <img src="../src/main/java/lk/easycar/assets/car_management.jpg" class="img-fluid rounded-start"
                         alt="...">
                </div>
                <div class="col-md-8">
                    <div class="card-body">
                        <h5 class="card-title">Manage Driver</h5>
                        <li>Add Driver</li>
                        <li>Update Driver</li>
                        <li>Remove Driver</li>
                        <li>Maintenance</li>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-5">
        <div class="card mb-3" style="max-width: 540px;">
            <div class="row g-0">
                <div class="col-md-4">
                    <img src="../src/main/java/lk/easycar/assets/customer_management.jpg"
                         class="img-fluid rounded-start" alt="...">
                </div>
                <div class="col-md-8">
                    <div class="card-body">
                        <h5 class="card-title">Manage Bookings</h5>
                        <li>Confirm Booking</li>
                        <li>Remove Booking</li>
                    </div>
                </div>
            </div>
        </div>
        <div class="card mb-3" style="max-width: 540px;">
            <div class="row g-0">
                <div class="col-md-4">
                    <img src="../src/main/java/lk/easycar/assets/driver_management.jpg" class="img-fluid rounded-start"
                         alt="...">
                </div>
                <div class="col-md-8">
                    <div class="card-body">
                        <h5 class="card-title">Payment Process</h5>
                        <li>Add Payment</li>
                        <li>View Payments</li>

                    </div>
                </div>
            </div>
        </div>
        &lt;!&ndash;<div class="card mb-3" style="max-width: 540px;">
          <div class="row g-0">
            <div class="col-md-4">
              <img src="../src/main/java/lk/easycar/assets/car_management.jpg" class="img-fluid rounded-start" alt="...">
            </div>
            <div class="col-md-8">
              <div class="card-body">
                <h5 class="card-title">Manage Driver</h5>
                <li>Add Driver</li>
                <li>Update Driver</li>
                <li>Remove Driver</li>
                <li>Maintenance</li>
              </div>
            </div>
          </div>
        </div>&ndash;&gt;
    </div>

</section>
-->

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
        crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.6.1.min.js"
        integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script>

<script>

    let baseUrl = "http://localhost:8080/Spring_CW_Easy_Car_Rental_war/"

    setDashBoardData();
    function setDashBoardData() {
        let customerCount = getCustomerCount();
        $('#bookingUsers').append(
            "<h2>" + customerCount + "</h2>"
        );
        $('#bookingUsers>div').empty();

        /*driver count*/
        let driverCount = getDriverCount();
        $('#driverCount').append(
            "<h2>" + driverCount + "</h2>"
        );
        $('#driverCount>div').empty();

        /*car count*/
        let carCount = getCarCount();
        $('#carsCount').append(
            "<h2>" + carCount + "</h2>"
        );
        $('#carsCount>div').empty();

        /*car count*/
        let bookingCount = getBookingCount();
        $('#bookingCount').append(
            "<h2>" + bookingCount + "</h2>"
        );
        $('#bookingCount>div').empty();

        /*car count*/
        //let repairCars = getBookingCount();
        $('#repairCars').append(
            "<h2>" + 5 + "</h2>"
        );
        $('#repairCars>div').empty();

        /*today booking count*/
        //let today = new Date();

        /*var d = new Date();
        var strDate = d.getFullYear() + "/" + (d.getMonth()+1) + "/" + d.getDate();
        console.log(strDate);
        let bookingForDay = getBookingCountToday();*/
        $('#bookingForDay').append(
            "<h2>" + 5 + "</h2>"
        );
        $('#bookingForDay>div').empty();

    }

    /*get customer count*/
    function getCustomerCount() {
        let c = 0;
        $.ajax({
            url: baseUrl + "customer",
            dataType: "json",
            async: false,
            success: function (res) {
                c = (res.data).length;
            }
        });
        return c;

    };

    /*get driver count*/
    function getDriverCount() {
        let c = 0;
        $.ajax({
            url: baseUrl + "driver",
            dataType: "json",
            async: false,
            success: function (res) {
                c = (res.data).length;
            }
        });
        return c;

    };

    /*get driver count*/
    function getCarCount() {
        let c = 0;
        $.ajax({
            url: baseUrl + "car",
            dataType: "json",
            async: false,
            success: function (res) {
                c = (res.data).length;
            }
        });
        return c;
    };

    /*get booking count*/
    function getBookingCount() {
        let c = 0;
        $.ajax({
            url: baseUrl + "booking",
            dataType: "json",
            async: false,
            success: function (res) {
                c = (res.data).length;
            }
        });
        return c;
    };

    /*/!*maintainence cars*!/
    function getBookingCount() {
        let c = 0;
        $.ajax({
            url: baseUrl + "booking",
            dataType: "json",
            async: false,
            success: function (res) {
                c = (res.data).length;
            }
        });
        return c;
    };*/


    $('#carouselOne>div>div:nth-child(1)').click(function () {
        location.href = "customerManagerPage.html";
    });
    $('#carouselOne>div>div:nth-child(2)').click(function () {
        location.href = "BookingManagePage.html";
    });
    $('#carouselOne>div>div:nth-child(3)').click(function () {
        location.href = "DriverManagerPage.html";
    });
    $('#carouselTwo>div>div:nth-child(1)').click(function () {
        location.href = "carManagePage.html";
    });
    $('#carouselTwo>div>div:nth-child(2)').click(function () {
        location.href = "paymentPage.html";
    });


</script>

</body>
</html>